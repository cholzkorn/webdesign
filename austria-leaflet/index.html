<!doctype html>
<html lang="en">

<head>
	<meta charset='utf-8' />
	<title>
		Austrian Municipalities BaseMap
	</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
	<!--[if lte IE 8]>
			<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
		<![endif]-->
	<style>
		html {
			height: 100%
		}

		body {
			height: 100%;
			margin: 0;
			padding: 0;
		}

		#map {
			height: 100%
		}
	</style>
	<link rel="stylesheet" href="gh-pages.css" />
</head>

<body>

	<div id="map"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
    <script>
        var counties = $.ajax({
            url: "verwaltungsgrenzen/gemeinden_simple.json",
            dataType: "json",
            success: console.log("County data successfully loaded."),
            error: function(xhr) {
                alert(xhr.statusText)
            }
        })
        $.when(counties).done(function() {
            var map = L.map('map')
                .setView([47.47, 13.56], 7);
            var basemap = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
						  maxZoom: 18,
						  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
						    '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
						    'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
						  id: 'mapbox.light'
						}).addTo(map);
            // Add requested external GeoJSON to map
            var kyCounties = L.geoJSON(counties.responseJSON, {weight: 1}).addTo(map);
        });
    </script>

</body>

</html>
